<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Artikel - efektifpedia</title>
    <style>
      body { display: flex; flex-direction: column; min-height: 100vh; padding-top: 80px; }
      .content-wrapper { flex: 1; }
      #post-content img { max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0; }
      #post-content { line-height: 1.8; font-size: 1.1rem; color: #333; }
      /* Gaya Judul Utama */
      .entry-title { color: #0d6efd; font-weight: bold; margin-bottom: 20px; text-transform: capitalize; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="index.html">efektifpedia</a>
        <div class="navbar-nav ms-auto">
          <a class="nav-link" href="index.html">HOME</a>
          <a class="nav-link" href="blog.html">BLOG</a>
        </div>
      </div>
    </nav>

    <div class="content-wrapper container mt-4 mb-5">
      <div class="row justify-content-center">
        <div class="col-md-8 shadow-sm p-4 bg-white rounded">
          <div id="post-loading" class="text-center">
            <div class="spinner-border text-primary"></div>
            <p>Memuat artikel...</p>
          </div>
          
          <h1 id="article-title" class="entry-title"></h1>
          
          <article id="post-content"></article>
          
          <hr class="mt-5">
          <a href="blog.html" class="btn btn-outline-primary">&larr; Kembali ke Blog</a>
        </div>
      </div>
    </div>

    <footer class="bg-primary text-white text-center pb-2 mt-auto">
      <p class="pt-3 m-0">created by ðŸ”¶ irawan</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
      async function loadPost() {
        const params = new URLSearchParams(window.location.search);
        const fileName = params.get('file');
        const contentArea = document.getElementById('post-content');
        const titleArea = document.getElementById('article-title');
        const loading = document.getElementById('post-loading');

        if (!fileName) {
          window.location.href = 'blog.html';
          return;
        }

        try {
          const response = await fetch(`https://raw.githubusercontent.com/chipper26/efektifpedia/main/blog/${fileName}`);
          let markdown = await response.text();
          
          let cleanTitle = "";

          // --- LOGIKA EKSTRAKSI JUDUL & PEMBERSIH ---
          if (markdown.startsWith('---')) {
            const parts = markdown.split('---');
            if (parts.length >= 3) {
              const frontmatter = parts[1];
              // Cari baris yang diawali "title:"
              const titleMatch = frontmatter.match(/title:\s*(.*)/i);
              if (titleMatch) {
                cleanTitle = titleMatch[1].replace(/['"]/g, ''); // Hapus tanda kutip jika ada
              }
              markdown = parts.slice(2).join('---').trim();
            }
          }

          // Jika judul tidak ditemukan di Frontmatter, ambil dari nama file
          if (!cleanTitle) {
            cleanTitle = fileName.replace(/^\d{4}-\d{2}-\d{2}-/, '').replace('.md', '').replace(/-/g, ' ');
          }

          // Tampilkan Judul dan Isi
          titleArea.innerText = cleanTitle;
          contentArea.innerHTML = marked.parse(markdown);
          
          loading.style.display = 'none';
          document.title = cleanTitle.toUpperCase() + " - efektifpedia";
          
        } catch (e) {
          contentArea.innerHTML = "<h3 class='text-center'>Artikel tidak ditemukan.</h3>";
          loading.style.display = 'none';
        }
      }
      loadPost();
    </script>
  </body>
</html>