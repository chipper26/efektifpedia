<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Artikel - efektifpedia</title>
    <style>
      body { display: flex; flex-direction: column; min-height: 100vh; padding-top: 80px; }
      .content-wrapper { flex: 1; }
      #post-content img { max-width: 100%; height: auto; border-radius: 8px; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="index.html">efektifpedia</a>
        <div class="navbar-nav ms-auto">
          <a class="nav-link" href="index.html">HOME</a>
          <a class="nav-link" href="blog.html">BLOG</a>
        </div>
      </div>
    </nav>

    <div class="content-wrapper container mt-4 mb-5">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div id="post-loading" class="text-center">
            <div class="spinner-border text-primary"></div>
            <p>Memuat artikel...</p>
          </div>
          <article id="post-content"></article>
          <hr>
          <a href="blog.html" class="btn btn-outline-primary">&larr; Kembali ke Blog</a>
        </div>
      </div>
    </div>

    <footer class="bg-primary text-white text-center pb-2 mt-auto">
      <p class="pt-3">created by ðŸ”¶ irawan</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
      async function loadPost() {
        const params = new URLSearchParams(window.location.search);
        const fileName = params.get('file');
        const contentArea = document.getElementById('post-content');
        const loading = document.getElementById('post-loading');

        if (!fileName) {
          window.location.href = 'blog.html';
          return;
        }

        try {
          const response = await fetch(`https://raw.githubusercontent.com/chipper26/efektifpedia/main/blog/${fileName}`);
          const markdown = await response.text();
          
          // Render markdown ke HTML
          contentArea.innerHTML = marked.parse(markdown);
          loading.style.display = 'none';
          document.title = fileName.replace('.md', '').replace(/-/g, ' ') + " - efektifpedia";
        } catch (e) {
          contentArea.innerHTML = "<h3>Artikel tidak ditemukan.</h3>";
          loading.style.display = 'none';
        }
      }
      loadPost();
    </script>
  </body>
</html>